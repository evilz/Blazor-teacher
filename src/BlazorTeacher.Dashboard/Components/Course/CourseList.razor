@* 
    CourseList.razor
    A component for displaying a list of courses.
    Demonstrates:
    - Component composition (using child components)
    - Virtualization for performance
    - Event handling and propagation
*@

@if (IsLoading)
{
    <LoadingSpinner Message="Loading courses..." />
}
else if (Courses == null || !Courses.Any())
{
    <div class="flex flex-col items-center justify-center rounded-xl bg-white py-16 px-4 text-center shadow-sm ring-1 ring-slate-200">
        <div class="flex h-16 w-16 items-center justify-center rounded-full bg-slate-100">
            <svg class="h-8 w-8 text-slate-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
            </svg>
        </div>
        <h3 class="mt-4 text-lg font-semibold text-slate-900">No courses found</h3>
        <p class="mt-2 text-sm text-slate-500">
            @(string.IsNullOrEmpty(SearchTerm) ? "Create your first course to get started." : "Try adjusting your search criteria.")
        </p>
    </div>
}
else
{
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        @foreach (var course in Courses)
        {
            <CourseCard 
                Course="course"
                OnView="HandleView"
                OnEdit="HandleEdit"
                OnDelete="HandleDelete" />
        }
    </div>
}

@code {
    /// <summary>
    /// List of courses to display.
    /// </summary>
    [Parameter]
    public IEnumerable<CourseDto>? Courses { get; set; }

    /// <summary>
    /// Whether courses are being loaded.
    /// </summary>
    [Parameter]
    public bool IsLoading { get; set; }

    /// <summary>
    /// Current search term for empty state message.
    /// </summary>
    [Parameter]
    public string? SearchTerm { get; set; }

    [Parameter]
    public EventCallback<CourseDto> OnView { get; set; }

    [Parameter]
    public EventCallback<CourseDto> OnEdit { get; set; }

    [Parameter]
    public EventCallback<CourseDto> OnDelete { get; set; }

    private async Task HandleView(CourseDto course) => await OnView.InvokeAsync(course);
    private async Task HandleEdit(CourseDto course) => await OnEdit.InvokeAsync(course);
    private async Task HandleDelete(CourseDto course) => await OnDelete.InvokeAsync(course);
}
